# SPEC: 블로그 시리즈 발행 기능

## 1. 목적

포스트를 시리즈 단위로 묶어 발행/탐색할 수 있도록 기능을 추가한다.  
현재 블로그는 태그/전역 이전·다음만 지원하며 시리즈 개념이 없다.

## 2. 목표/성공 기준

- 포스트 frontmatter에 시리즈 정보를 선언할 수 있다.
- `/series`에서 전체 시리즈 목록을 볼 수 있다.
- `/series/[slug]`에서 시리즈별 포스트 목록을 볼 수 있다.
- 시리즈 포스트 상세에서 시리즈 링크와 시리즈 내 이전/다음 이동이 동작한다.
- 비시리즈 포스트는 기존 동작(전역 이전/다음)을 그대로 유지한다.

## 3. 범위

### 포함

- 시리즈 메타 필드 추가
- 시리즈 인덱스/상세 라우트 추가
- 포스트 상세 내 시리즈 진입 링크
- 시리즈 기준 이전/다음 계산
- 헤더 네비게이션에 `Series` 추가
- sitemap/metadata 반영

### 제외

- 홈/블로그 리스트 카드 내 시리즈 배지 노출
- 시리즈 커버/설명 등 확장 메타
- 수동 `seriesSlug` 오버라이드

## 4. 정보 구조 및 URL

- 시리즈 인덱스: `/series`
- 시리즈 상세: `/series/[slug]`
- slug 생성: `series` 문자열을 slugify 하여 자동 생성

## 5. 콘텐츠 스키마

`Blog` frontmatter 필드 확장:

- `series?: string`
- `seriesOrder?: number`

기존 필드는 유지하며, 두 필드는 optional로 하위 호환을 보장한다.

## 6. 정렬 규칙

시리즈 내부 포스트 정렬:

1. `seriesOrder` 오름차순
2. `date` 오름차순 (동순위/누락 보정)

`seriesOrder` 누락 글은 후순위로 배치하되 날짜 기준으로 안정 정렬한다.

## 7. 페이지 동작

### `/series`

- 시리즈 목록 렌더링
- 항목: 시리즈명, 글 수, 링크(`/series/[slug]`)

### `/series/[slug]`

- 해당 시리즈 포스트 목록 렌더링
- 항목: 제목, 날짜, 요약, 링크(`/blog/[...slug]`)
- 존재하지 않는 slug는 404 처리

## 8. 포스트 상세 동작

- 포스트가 `series`를 가지면:
  - 시리즈 링크 표시
  - 이전/다음을 시리즈 내부 기준으로 계산하여 노출
- 포스트가 `series` 없으면:
  - 기존 전역 이전/다음 로직 유지

## 9. 공개 인터페이스 변경

- Contentlayer `Blog` 타입에 `series`, `seriesOrder` 추가
- 신규 라우트:
  - `app/series/page.tsx`
  - `app/series/[slug]/page.tsx`
- `data/headerNavLinks.ts`에 `/series` 추가

## 10. 에러/엣지 케이스

- `series`만 있고 `seriesOrder` 없는 포스트: 후순위 + 날짜 정렬
- `seriesOrder` 중복: 날짜 보조 정렬
- 대소문자/공백 차이: slug 기준으로 동일 그룹 처리
- 잘못된 시리즈 slug 접근: 404

## 11. SEO 및 사이트맵

- `/series`, `/series/[slug]`를 sitemap 대상에 포함
- 페이지 메타데이터(타이틀/설명) 추가

## 12. 검증 계획

- `yarn lint` 통과
- `yarn build` 통과
- 수동 점검:
  - 비시리즈 포스트 상세 기존 동작 유지
  - 시리즈 포스트 상세의 시리즈 링크/내부 이전·다음 동작
  - `/series` 목록 노출
  - `/series/[slug]` 정렬/링크 정상
  - 잘못된 slug 404

## 13. 마이그레이션 전략

- 기존 포스트는 수정 없이 유지
- 신규/기존 포스트에 `series`, `seriesOrder`를 점진적으로 추가

## 14. 가정

- 초기 릴리즈는 최소 기능(MVP) 중심
- 시리즈명 표준은 콘텐츠 작성 규칙으로 관리
